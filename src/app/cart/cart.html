
<h1 class="cart-title text-center mb-4">سلة المشتريات</h1>
<div *ngIf="cartService.cartItems.length === 0" class="empty-cart text-center">
	<p>سلتك فارغة.</p>
</div>
<div *ngIf="cartService.cartItems.length > 0" class="row justify-content-center">
	<div *ngFor="let item of cartService.cartItems" class="col-md-4 mb-4">
		<div class="card h-100 shadow cart-card">
			<img [src]="item.image" [alt]="item.name" class="card-img-top cart-img" style="height: 220px; object-fit: cover;">
			<div class="card-body d-flex flex-column align-items-center">
				<h5 class="card-title">{{ item.name }}</h5>
				<p class="card-text mb-1">السعر: <span class="fw-bold">${{ item.price }}</span></p>
				<p class="card-text">الكمية: <span class="fw-bold">{{ item.count }}</span></p>
				<div class="d-flex gap-2 mt-2">
					<button class="btn btn-danger" (click)="removeItem(item.id)">حذف المنتج</button>
					<button class="btn btn-success" (click)="orderNow(item)">اطلب الآن</button>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Order Modal -->
<div class="modal fade" id="orderModal" tabindex="-1" aria-labelledby="orderModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header bg-success text-white">
				<h5 class="modal-title" id="orderModalLabel">تأكيد الطلب</h5>
				<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-md-6">
						<div class="card">
							<img [src]="selectedProduct?.image" [alt]="selectedProduct?.name" class="card-img-top" style="height: 200px; object-fit: cover;">
							<div class="card-body">
								<h5 class="card-title">{{ selectedProduct?.name }}</h5>
								<p class="card-text">السعر: <span class="fw-bold text-success">${{ selectedProduct?.price }}</span></p>
								<p class="card-text">الكمية: <span class="fw-bold">{{ selectedProduct?.count }}</span></p>
								<p class="card-text">المجموع: <span class="fw-bold text-success">${{ (selectedProduct?.price * selectedProduct?.count).toFixed(2) }}</span></p>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<form (ngSubmit)="submitOrder()" #orderForm="ngForm">
							<div class="mb-3">
								<label for="name" class="form-label">الاسم الكامل *</label>
								<input type="text" class="form-control" id="name" name="name" [(ngModel)]="orderData.name" required>
							</div>
							<div class="mb-3">
								<label for="email" class="form-label">البريد الإلكتروني *</label>
								<input type="email" class="form-control" id="email" name="email" [(ngModel)]="orderData.email" required>
							</div>
							<div class="mb-3">
								<label for="number" class="form-label">رقم الهاتف *</label>
								<input type="tel" class="form-control" id="number" name="number" [(ngModel)]="orderData.number" required>
							</div>
							<div class="mb-3">
								<label for="address" class="form-label">العنوان *</label>
								<textarea class="form-control" id="address" name="address" rows="3" [(ngModel)]="orderData.address" required></textarea>
							</div>
							<div class="d-grid">
								<button type="submit" class="btn btn-success btn-lg" [disabled]="!orderForm.valid || isSubmitting">
									<span *ngIf="!isSubmitting">تأكيد الطلب</span>
									<span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-2"></span>
									<span *ngIf="isSubmitting">جاري الإرسال...</span>
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
